import React, { Suspense, useState } from "react";
import ReactDOM from "react-dom/client";
import "./index.css";
import { CssBaseline, Icon } from "@mui/material";
import { BrowserRouter, Route, Routes } from "react-router-dom";
import { PAGELIST } from "./config/pageList.jsx";

import { ThemeProvider } from "./components/index.js";
import NotFound from "./pages/CustomPage/NotFound.jsx";
import { SnackbarProvider } from "notistack";
import * as SolarIconSet from "solar-icon-set";
import Base from "./layout/Base.jsx";
import TransitionLoader from "./components/Generic Components/LoadersComponent/TransitionLoader.jsx";

const Index = () => {
  const [darkMode, setDarkMode] = useState(false);

  const toggleDarkMode = () => {
    setDarkMode((prevMode) => !prevMode);
  };
  return (
    <ThemeProvider darkMode={darkMode}>
      <Suspense fallback={<TransitionLoader />}>
        <BrowserRouter>
          <CssBaseline />
          <Routes>
            {/* <Route path="/" element={<HomePage darkMode={darkMode} toggleDarkMode={toggleDarkMode}  />} /> */}
            <Route
              element={
                <Base darkMode={darkMode} toggleDarkMode={toggleDarkMode} />
              }
            >
              {PAGELIST.map((page) => (
                <Route
                  key={page.key || page.path}
                  path={page.path}
                  exact
                  element={page.component}
                />
              ))}
            </Route>
            <Route path="*" element={<NotFound />} />
          </Routes>
        </BrowserRouter>
      </Suspense>
    </ThemeProvider>
  );
};

ReactDOM.createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <SnackbarProvider
      iconVariant={{
        success: (
          <Icon sx={{ marginRight: "8px" }}>
            <SolarIconSet.DangerCircle iconStyle="BoldDuotone" size={24} />
          </Icon>
        ),
        error: (
          <Icon sx={{ marginRight: "8px" }}>
            <SolarIconSet.DangerCircle iconStyle="BoldDuotone" size={24} />
          </Icon>
        ),

        info: (
          <Icon sx={{ marginRight: "8px" }}>
            <SolarIconSet.InfoSquare iconStyle="BoldDuotone" size={24} />
          </Icon>
        ),
        warning: (
          <Icon sx={{ marginRight: "8px" }}>
            <SolarIconSet.DangerTriangle iconStyle="BoldDuotone" size={24} />
          </Icon>
        ),
      }}
      anchorOrigin={{ vertical: "top", horizontal: "right" }}
    >
      <Index />
    </SnackbarProvider>
  </React.StrictMode>
);
