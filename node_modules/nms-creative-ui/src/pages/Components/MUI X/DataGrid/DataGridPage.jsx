import React, { useState } from "react";
import {
  Box,
  Icon,
  Stack,
  Tab,
  TabContext,
  TabList,
  TabPanel,
  Typography,
} from "../../../../components";

import * as SolarIconSet from "solar-icon-set";
import CodeBlock from "../../../../lib/ReactSyntaxHighlighter";
import COMPONENTS from "./data/component";
import { useMediaQuery } from "@mui/material";
import DashedPaper from "../../../../components/Generic Components/CustPaper/DashedPaper";
import CustPaper from "../../../../components/Generic Components/CustPaper/CustPaper";

const DataGridTab = ({ item }) => {
  const [value, setValue] = useState(item.first_value);

  const handleChange = (event, newValue) => {
    setValue(newValue);
  };

  const isMobile = useMediaQuery("(max-width:600px)");

  return (
    <CustPaper>
      <TabContext value={value}>
        <Typography variant="h4" sx={{ marginBottom: 3 }}>
          {item.name}
        </Typography>
        <TabList onChange={handleChange} aria-label="lab API tabs example">
          <Tab label="Preview" value={item.first_value} />
          <Tab label="JSX" value={item.second_value} />
        </TabList>

        <TabPanel value={item.first_value}>
          <DashedPaper>
            <Stack
              direction={isMobile ? "column" : "row"}
              spacing={2}
              sx={{ flexWrap: "wrap", justifyContent: "center" }}
            >
              {React.createElement(item.component)}
            </Stack>
          </DashedPaper>
        </TabPanel>
        <TabPanel value={item.second_value}>
          <CodeBlock code={item.exampleComponent} language={"jsx"} />
        </TabPanel>
      </TabContext>
    </CustPaper>
  );
};

const DataGridPage = () => {
  return (
    <Stack spacing={6}>
      <Box>
        <Stack direction={"column"} spacing={3}>
          <Stack direction={"row"} spacing={1}>
            <Icon color="secondary">
              <SolarIconSet.ShareCircle size={24} iconStyle="BoldDuotone" />
            </Icon>

            <Typography variant="body1">MUI X</Typography>
          </Stack>

          <Stack direction={"column"} spacing={1}>
            <Typography variant="h2">Data Grid</Typography>
            <Typography variant="body1">
              Lorem ipsum dolor sit amet consectetur. Urna dictum pulvinar a
              orci eu nunc diam in neque.
            </Typography>
          </Stack>
          <Stack direction={"column"} spacing={1}>
            <a href="https://mui.com/x/react-data-grid/" target="_blank">
              <Typography>https://mui.com/x/react-data-grid/</Typography>
            </a>
            <a
              href="https://mui.com/material-ui/react-accordion/"
              target="_blank"
            >
              <Typography>
                https://mui.com/material-ui/react-accordion/
              </Typography>
            </a>
          </Stack>
        </Stack>
      </Box>
      <Stack direction="column" spacing={6}>
        {COMPONENTS.map((item, index) => (
          <DataGridTab key={index} item={item} />
        ))}
      </Stack>
    </Stack>
  );
};

export default DataGridPage;
